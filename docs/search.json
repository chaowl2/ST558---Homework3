[
  {
    "objectID": "homework3.html",
    "href": "homework3.html",
    "title": "Homework 3",
    "section": "",
    "text": "# Load rda file\nload(\"hw2_list.rda\")\n\n\n\n\n\n# Creating new columns in both dataframes of vector length n\nbp_list$treatment$status = character(nrow(bp_list$treatment))\nbp_list$placebo$status = character(nrow(bp_list$placebo))\n\n\n\n\n\n# Fill status for treatment group\nfor (i in seq_len(nrow(bp_list$treatment))) {\n  bp = bp_list$treatment$post_bp[i]\n  \n  if (is.na(bp)) {\n    bp_list$treatment$status[i] = NA_character_\n  } else if (bp <= 120) {\n    bp_list$treatment$status[i] = \"optimal\"\n  } else if (bp <= 130) {\n    bp_list$treatment$status[i] = \"borderline\"\n  } else {\n    bp_list$treatment$status[i] = \"high\"\n  }\n}\n\n\n\n\n\n# Fill status for placebo group\nfor (i in seq_len(nrow(bp_list$placebo))) {\n  bp = bp_list$placebo$post_bp[i]\n  \n  if (is.na(bp)) {\n    bp_list$placebo$status[i] = NA_character_\n  } else if (bp <= 120) {\n    bp_list$placebo$status[i] = \"optimal\"\n  } else if (bp <= 130) {\n    bp_list$placebo$status[i] = \"borderline\"\n  } else {\n    bp_list$placebo$status[i] = \"high\"\n  }\n}"
  },
  {
    "objectID": "homework3.html#task-2-function-writing",
    "href": "homework3.html#task-2-function-writing",
    "title": "Homework 3",
    "section": "Task 2: Function Writing",
    "text": "Task 2: Function Writing\nThe function below:\n1) takes a list with two data frames (`treatment` and `placebo`),\n2) takes a descriptive statistic as a quoted string with default “mean”,\n3) uses `get(stat)` to fetch the R function,\n4) computes the statistic on the `pre_bp`, `post_bp`, and `diff_bp` columns for both data frames,\n5) returns a named list of six values.\n\n# Returns a vector\nsummarize_bp_vec = function(lst, stat = \"mean\") {\n  # get the function from the quoted string\n  my_function = get(stat, mode = \"function\")\n  \n  groups = c(\"treatment\", \"placebo\")\n  columns = c(\"pre_bp\", \"post_bp\", \"diff_bp\")\n  \n  out_vals = numeric(length(groups) * length(columns))\n  out_names = character(length(out_vals))\n  \n  k = 0L\n  for (g in groups) {\n    for (col in columns) {\n      k = k + 1L\n      x = lst[[g]][[col]]\n      out_vals[k] = my_function(x, na.rm = TRUE)\n      # names\n      out_names[k] = paste(g, sub(\"_bp$\", \"\", col), stat, sep = \"_\")\n    }\n  }\n  \n  names(out_vals) = out_names\n  out_vals\n}\n\n\nRunning function on bp_list\n\nres_mean <- summarize_bp_vec(bp_list)   # default \nres_var <- summarize_bp_vec(bp_list, stat = \"var\")\nres_sd  <- summarize_bp_vec(bp_list, stat = \"sd\")\nres_min <- summarize_bp_vec(bp_list, stat = \"min\")\nres_max <- summarize_bp_vec(bp_list, stat = \"max\")\n\n\nres_mean\n\n treatment_pre_mean treatment_post_mean treatment_diff_mean    placebo_pre_mean \n             131.60              125.95                5.65              131.90 \n  placebo_post_mean   placebo_diff_mean \n             128.90                3.00 \n\nres_var\n\n treatment_pre_var treatment_post_var treatment_diff_var    placebo_pre_var \n          75.72632           78.99737          117.81842          149.87778 \n  placebo_post_var   placebo_diff_var \n         124.98889          341.33333 \n\nres_sd\n\n treatment_pre_sd treatment_post_sd treatment_diff_sd    placebo_pre_sd \n         8.702087          8.888046         10.854419         12.242458 \n  placebo_post_sd   placebo_diff_sd \n        11.179843         18.475209 \n\nres_min\n\n treatment_pre_min treatment_post_min treatment_diff_min    placebo_pre_min \n               115                114                -24                114 \n  placebo_post_min   placebo_diff_min \n               105                -21 \n\nres_max\n\n treatment_pre_max treatment_post_max treatment_diff_max    placebo_pre_max \n               151                146                 21                152 \n  placebo_post_max   placebo_diff_max \n               143                 33 \n\n\n\nsummary_tab = data.frame(\n  measure = names(res_mean),\n  mean = unname(res_mean),\n  var  = unname(res_var[names(res_mean)]),\n  sd   = unname(res_sd[names(res_mean)]),\n  min  = unname(res_min[names(res_mean)]),\n  max  = unname(res_max[names(res_mean)])\n)\n\n\n\n         measure   mean    var    sd min max\n1  treatment_pre 131.60  75.73  8.70 115 151\n2 treatment_post 125.95  79.00  8.89 114 146\n3 treatment_diff   5.65 117.82 10.85 -24  21\n4    placebo_pre 131.90 149.88 12.24 114 152\n5   placebo_post 128.90 124.99 11.18 105 143\n6   placebo_diff   3.00 341.33 18.48 -21  33"
  }
]